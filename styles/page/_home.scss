@use 'sass:math';

.home {
	&-page {
		.hero-section {
			// padding-top: 120px ~ 200px
			$min-top: 20;
			$max-top: 40;
			$min-vw: 600;
			$max-vw: 1920;
			$slope-top: math.div($max-top - $min-top, $max-vw - $min-vw) * 100;
			$intercept-top: $min-top - ($slope-top * math.div($min-vw, 100));

			// padding-bottom: 40px ~ 80px
			$min-bottom: 20;
			$max-bottom: 40;
			$slope-bottom: math.div($max-bottom - $min-bottom, $max-vw - $min-vw) * 100;
			$intercept-bottom: $min-bottom - ($slope-bottom * math.div($min-vw, 100));

			--hero-padding-top: clamp(#{$min-top}px, #{$intercept-top}px + #{$slope-top}vw, #{$max-top}px);
			--hero-padding-bottom: clamp(#{$min-bottom}px, #{$intercept-bottom}px + #{$slope-bottom}vw, #{$max-bottom}px);

			height: calc(100dvh - var(--hero-padding-top) - var(--hero-padding-bottom));
			@include clamp-unit(padding-top, 120, 200);
			@include clamp-unit(padding-bottom, 40, 80);

			@media (min-width: 768px) {
				height: auto;
			}

			@include clamp-unit(padding-inline, 40, 80);
			@include clamp-unit(border-radius, 24, 60);
			h1 {
				@include clamp-unit(font-size, 20, 60);
				// @include clamp-unit(margin-bottom, 10, 20);
				margin-bottom: 20px;
			}
			p {
				@include clamp-unit(font-size, 16, 24);
			}
			.hero-logo {
				@include clamp-unit(height, 32, 72);
			}
		}
		.cta-button-section {
			@include clamp-unit(margin-top, 20, 50);
		}

		.carousel-section {
			@include clamp-unit(gap, 40, 80);
			@include clamp-unit(padding-block, 40, 120);
			.carousel-title {
				@include clamp-unit(font-size, 32, 52);
				@include clamp-unit(margin-bottom, 50, 100);
				color: #333;
				.carousel-logo {
					height: 0.9em;
				}
			}
			.swiper-pagination {
				pointer-events: none;
				// bottom: -20px;
				&-bullet {
					background-color: #a523d0;
					// opacity: 0.5;
					opacity: 1;
					&-active {
						background-color: #baff00;
						opacity: 1;
					}
				}
			}
			.carousel-container {
				position: relative;

				.service-carousel {
					@include clamp-unit(padding-bottom, 40, 60);
				}

				// Custom Navigation Buttons
				.service-carousel-button-prev,
				.service-carousel-button-next {
					position: absolute;
					top: 50%;
					transform: translateY(-50%);
					@include clamp-unit(width, 48, 56);
					@include clamp-unit(height, 48, 56);
					border-radius: 50%;
					display: flex;
					align-items: center;
					justify-content: center;
					cursor: pointer;
					z-index: 20;
					transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

					// Glassmorphism effect - visible on any background
					background: rgba(255, 255, 255, 0.95);
					backdrop-filter: blur(12px);
					border: 2px solid rgba(165, 35, 208, 0.2);
					box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(165, 35, 208, 0.15);

					// Icon color
					color: #a523d0;

					// Initially hidden
					opacity: 0;
					visibility: hidden;

					// Hover state
					&:hover {
						background: rgba(165, 35, 208, 1);
						border-color: #a523d0;
						color: #baff00;
						box-shadow: 0 6px 24px rgba(165, 35, 208, 0.4), 0 4px 12px rgba(165, 35, 208, 0.25);
						transform: translateY(-50%) scale(1.1);
					}

					// Active state
					&:active {
						transform: translateY(-50%) scale(0.95);
					}

					// Disabled state
					&.swiper-button-disabled {
						opacity: 0.3 !important;
						cursor: not-allowed;
						pointer-events: none;
					}

					// SVG styling
					svg {
						width: 24px;
						height: 24px;
						transition: transform 0.3s ease;
					}

					&:hover svg {
						transform: scale(1.1);
					}
				}

				.service-carousel-button-prev {
					@include clamp-unit(left, 16, 32);
				}

				.service-carousel-button-next {
					@include clamp-unit(right, 16, 32);
				}

				// Show navigation on carousel hover
				&:hover {
					.service-carousel-button-prev,
					.service-carousel-button-next {
						opacity: 1;
						visibility: visible;
					}
				}

				// Mobile: Always show buttons but with reduced opacity
				@media (max-width: 768px) {
					.service-carousel-button-prev,
					.service-carousel-button-next {
						opacity: 0.7;
						visibility: visible;
					}

					&:hover {
						.service-carousel-button-prev,
						.service-carousel-button-next {
							opacity: 1;
						}
					}
				}
			}
			.carousel-item {
				// @include clamp-unit(width, 300, 600);
				// @include clamp-unit(height, 300, 600);
				@include clamp-unit(border-radius, 20, 40);
				color: white;

				h3 {
					@include clamp-unit(font-size, 24, 32);
				}
				p {
					@include clamp-unit(font-size, 16, 20);
				}
				&-content {
					@include clamp-unit(padding, 24, 40);
				}
				button {
					@include clamp-unit(width, 40, 72);
					aspect-ratio: 1/1;
					flex-shrink: 0;
				}
			}
		}

		.sns-marketing-section {
			@include clamp-unit(padding-block, 40, 120);
			@include clamp-unit(padding-inline, 20, 40);
			@media (max-width: 768px) {
				padding-inline: 0;
			}

			.sns-header {
				@include clamp-unit(margin-bottom, 60, 120);
				@include clamp-unit(padding-inline, 20, 40);
				// @media (min-width: 768px) {
				// 	padding-right: 400px;
				// }

				.sns-title-wrapper {
					@include clamp-unit(padding-inline, 12, 12);
					@include clamp-unit(padding-block, 8, 8);
					@include clamp-unit(margin-bottom, 24, 32);

					h2 {
						@include clamp-unit(font-size, 32, 48);
					}
				}

				.sns-description {
					@include clamp-unit(font-size, 18, 24);
					line-height: 1.35;
				}
			}

			// .sns-decoration {
			// 	display: none;
			// 	@media (min-width: 768px) {
			// 		display: block;
			// 		position: absolute;
			// 		right: 360px;
			// 		top: 120px;
			// 		width: 419px;
			// 		height: 632px;
			// 	}
			// }

			.sns-items {
				@include clamp-unit(gap, 16, 20);

				@media (max-width: 768px) {
					gap: 0;
				}
			}

			.sns-item {
				@include clamp-unit(padding, 24, 40);
				@include clamp-unit(border-radius, 16, 32);
				@media (max-width: 768px) {
					border-radius: 0;
				}

				.sns-item-grid {
					@include clamp-unit(gap, 16, 20);
				}

				.sns-card-image,
				.sns-card-info {
					@include clamp-unit(border-radius, 12, 16);
				}

				.sns-card-info {
					@include clamp-unit(padding, 24, 32);

					.card-number {
						@include clamp-unit(font-size, 28, 40);
					}

					.card-title {
						@include clamp-unit(font-size, 24, 30);
						@include clamp-unit(margin-bottom, 8, 12);
					}

					.card-description {
						@include clamp-unit(font-size, 14, 16);
						line-height: 1.35;
					}
				}
			}
		}

		.cnx-mall-section {
			@include clamp-unit(padding-block, 40, 120);
			position: relative;

			.cnx-mall-header-wrapper {
				width: 100%;
				@include clamp-unit(padding-block, 40, 60);
			}

			.cnx-mall-header {
				// Desktop Layout: Horizontal marquees on sides
				.cnx-mall-header-desktop {
					display: none;

					@media (min-width: 769px) {
						display: flex;
						align-items: center;
						justify-content: center;
						@include clamp-unit(gap, 20, 40);
						// @include clamp-unit(margin-bottom, 24, 32);
					}

					.cnx-mall-marquee-horizontal {
						flex: 1;
						overflow: hidden;
						@include clamp-unit(height, 100, 200);
						position: relative;
					}

					// Gradient overlays for smooth fade effect
					.cnx-mall-marquee-left {
						&::after {
							content: '';
							position: absolute;
							top: 0;
							right: 0;
							width: 8vw;
							height: 100%;
							background: linear-gradient(to left, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));
							pointer-events: none;
							z-index: 10;
						}
					}

					.cnx-mall-marquee-right {
						&::after {
							content: '';
							position: absolute;
							top: 0;
							left: 0;
							width: 8vw;
							height: 100%;
							background: linear-gradient(to right, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));
							pointer-events: none;
							z-index: 10;
						}
					}

					.cnx-product-card {
						@include clamp-unit(width, 100, 200);
						@include clamp-unit(height, 100, 200);
					}

					.cnx-product-image {
						@include clamp-unit(width, 80, 180);
						@include clamp-unit(height, 80, 180);
					}

					.cnx-mall-title-container {
						flex-shrink: 0;
					}
				}

				// Mobile Layout: Title + Description (no marquees)
				.cnx-mall-header-mobile {
					display: flex;
					flex-direction: column;
					align-items: center;
					@include clamp-unit(gap, 16, 24);

					@media (min-width: 769px) {
						display: none;
					}
				}

				.cnx-mall-title-wrapper {
					@include clamp-unit(padding-inline, 12, 12);
					@include clamp-unit(padding-block, 8, 8);

					h2 {
						@include clamp-unit(font-size, 32, 52);
					}
				}

				.cnx-mall-description {
					@include clamp-unit(font-size, 18, 24);
					@include clamp-unit(padding-inline, 20, 40);
					line-height: 1.35;

					&.cnx-mall-description-desktop {
						display: none;

						@media (min-width: 769px) {
							display: block;
						}
					}
				}
			}

			// Mobile Marquees - Full width, below description
			.cnx-mall-marquees-mobile-wrapper {
				width: 100%;
				display: flex;
				flex-direction: column;
				@include clamp-unit(gap, 4, 8);
				@include clamp-unit(margin-bottom, 40, 60);

				@media (min-width: 769px) {
					display: none;
				}

				.cnx-marquee-mobile-row {
					@include clamp-unit(height, 60, 80);
				}

				.cnx-product-card-mobile {
					@include clamp-unit(width, 60, 80);
					@include clamp-unit(height, 60, 80);
				}

				.cnx-product-image-mobile {
					@include clamp-unit(width, 50, 70);
					@include clamp-unit(height, 50, 70);
				}
			}

			.cnx-mall-cards {
				@include clamp-unit(gap, 16, 20);

				@media (max-width: 768px) {
					gap: 0;
				}
			}

			.cnx-mall-card {
				@include clamp-unit(padding, 0, 0);
				@include clamp-unit(border-radius, 16, 32);
				@include clamp-unit(margin-bottom, 16, 20);
				// @include clamp-unit(height, 250, 386);

				&:last-child {
					margin-bottom: 0;
				}

				.cnx-mall-card-content {
					display: grid;
					grid-template-columns: 1fr;
					// height: auto;
					gap: 0;

					@media (min-width: 768px) {
						grid-template-columns: 1fr 1fr;
					}

					&.cnx-mall-card-reverse {
						@media (min-width: 768px) {
							grid-template-columns: 1fr 1fr;
						}
					}
				}

				.cnx-mall-card-text {
					display: flex;
					flex-direction: column;
					@include clamp-unit(gap, 16, 24);
					@include clamp-unit(padding, 24, 40);
					order: 1;

					@media (min-width: 768px) {
						order: unset;
					}

					.cnx-mall-card-title {
						@include clamp-unit(font-size, 24, 32);
						line-height: 1.35;
					}

					.cnx-mall-card-description {
						@include clamp-unit(font-size, 14, 16);
						line-height: 1.6;

						p {
							margin-bottom: 0;
						}
					}
				}

				.cnx-mall-card-phone,
				.cnx-mall-card-desktop {
					position: relative;
					order: 2;

					@media (min-width: 768px) {
						order: unset;
					}
				}

				// .cnx-phone-wrapper {
				// 	position: absolute;
				// 	left: 50%;
				// 	top: 0;
				// 	transform: translateX(-50%);
				// 	@include clamp-unit(width, 300, 402);
				// 	@include clamp-unit(height, 600, 835);
				// }

				// .cnx-desktop-wrapper {
				// 	position: absolute;
				// 	left: 50%;
				// 	top: 50%;
				// 	transform: translate(-50%, -50%);
				// 	@include clamp-unit(width, 500, 716);
				// 	@include clamp-unit(height, 300, 401);
				// }
			}
		}

		// Flow Grid System - 공통 스타일
		.flow-grid-section {
			@include clamp-unit(padding-block, 60, 120);
			@include clamp-unit(padding-inline, 20, 40);
			position: relative;
			&-content {
				@include clamp-unit(padding-inline, 20, 40);
			}
			// @media (min-width: 1440px) {
			// 	@include clamp-unit(padding-inline, 200, 360);
			// }

			// Header 스타일
			.flow-header {
				display: flex;
				flex-direction: column;
				@include clamp-unit(gap, 24, 32);
				// align-items: center;
				@include clamp-unit(margin-bottom, 50, 100);
				// text-align: center;
				@media (max-width: 767px) {
					margin-bottom: 0;
				}
				.flow-title-wrapper {
					display: inline-flex;
					width: fit-content;
					@include clamp-unit(padding-inline, 12, 12);
					@include clamp-unit(padding-block, 6, 6);

					h2 {
						@include clamp-unit(font-size, 32, 52);
					}
				}

				.flow-description {
					@include clamp-unit(font-size, 18, 24);
					line-height: 1.35;
				}
			}

			// Flow Grid Container
			.flow-grid-container {
				position: relative;
				display: grid;
				grid-template-columns: 1fr;
				gap: 20px;
				@media (min-width: 768px) {
					grid-template-columns: repeat(3, 1fr);
				}
			}

			.flow-grid-item {
				position: relative;
				// z-index를 주면 각 아이템이 독립 스태킹 컨텍스트가 되어
				// 중간 화살표가 다음 아이템에 가려질 수 있음
				// z-index: 1;

				// 초기에는 화살표를 숨기고 블러 처리
				&:not(:first-child):not(:last-child)::after {
					opacity: 0;
					filter: blur(6px);
				}

				// 가시화되면 애니메이션으로 노출
				&.is-visible:not(:first-child):not(:last-child)::after {
					animation: flow-arrow-in var(--flow-arrow-duration, 0.4s) ease-out var(--flow-arrow-delay, 0s) forwards;
				}
				// 모바일: 순서 유지 (1→2→3→4→5→6)
				&:nth-child(1) {
					order: 1;
				}
				&:nth-child(2) {
					order: 2;
				}
				&:nth-child(3) {
					order: 3;
				}
				&:nth-child(4) {
					order: 4;
				}
				&:nth-child(5) {
					order: 5;
				}
				&:nth-child(6) {
					order: 6;
				}

				// 데스크톱: 두 번째 줄 순서 역전 (1,2,3 / 6,5,4)
				@media (min-width: 768px) {
					&:nth-child(4) {
						order: 6;
					}
					&:nth-child(6) {
						order: 4;
					}
				}

				// 화살표 공통 스타일
				&:not(:first-child):not(:last-child)::after {
					content: '\f054';
					font-family: 'Font Awesome 7 Pro';
					font-weight: 900;
					position: absolute;
					@include clamp-unit(width, 36, 40);
					@include clamp-unit(height, 36, 40);
					@include clamp-unit(font-size, 16, 18);
					background: white;
					border: 2px solid #a523d0;
					border-radius: 50%;
					color: #a523d0;
					z-index: 10;
					line-height: 1;
					display: grid;
					place-items: center;
				}

				// 모바일: 모든 아이템 아래 방향 (↓)
				@media (max-width: 767px) {
					&:nth-child(2)::after,
					&:nth-child(3)::after,
					&:nth-child(4)::after,
					&:nth-child(5)::after {
						bottom: -10px;
						left: 50%;
						transform: translate(-50%, 50%) rotate(90deg);
					}
				}

				// 데스크톱: 각 아이템별 방향 설정
				@media (min-width: 768px) {
					// 2번 (세팅): 우측으로 (→)
					&:nth-child(2)::after {
						top: 50%;
						right: -10px;
						transform: translate(50%, -50%);
					}

					// 3번 (기획): 아래로 (↓)
					&:nth-child(3)::after {
						bottom: -10px;
						left: 50%;
						transform: translate(-50%, 50%) rotate(90deg);
					}

					// 4번, 5번 (구매전환, 트래픽): 좌측으로 (←)
					&:nth-child(4)::after,
					&:nth-child(5)::after {
						top: 50%;
						left: -10px;
						transform: translate(-50%, -50%) rotate(180deg);
					}
				}
			}

			@keyframes flow-arrow-in {
				0% {
					opacity: 0;
					filter: blur(6px);
				}
				100% {
					opacity: 1;
					filter: blur(0);
				}
			}

			// Flow Card 스타일
			.flow-card {
				@include clamp-unit(padding, 24, 40);
				@include clamp-unit(border-radius, 12, 24);
				// @include clamp-unit(height, 280, 320);

				h3 {
					@include clamp-unit(font-size, 24, 32);
					line-height: 1.1;
				}

				.flow-card-description {
					@include clamp-unit(font-size, 14, 16);
					line-height: 1.35;
				}

				// Icon 스타일 - FontAwesome CDN 방식
				i.fa-solid,
				i.fa-regular,
				i.fa-light,
				i.fa-brands {
					@include clamp-unit(font-size, 40, 72);
					color: #a523d0; // brand-purple
				}

				// SVG 아이콘 스타일
				// svg {
				// 	@include clamp-unit(width, 40, 72);
				// 	// @include clamp-unit(height, 60, 75);
				// }
			}
		}

		.ppl-marketing-section {
			@include clamp-unit(padding-block, 40, 120);
			@include clamp-unit(padding-inline, 20, 40);
			@media (max-width: 768px) {
				padding-inline: 0;
			}

			.ppl-header {
				@include clamp-unit(margin-bottom, 60, 120);
				@media (max-width: 768px) {
					@include clamp-unit(padding-inline, 20, 40);
				}
				.ppl-title-wrapper {
					@include clamp-unit(padding-inline, 12, 12);
					@include clamp-unit(padding-block, 8, 8);
					@include clamp-unit(margin-bottom, 24, 32);

					h2 {
						@include clamp-unit(font-size, 32, 52);
					}
				}

				.ppl-description {
					@include clamp-unit(font-size, 18, 24);
					line-height: 1.35;
				}
			}

			.ppl-cards {
				@include clamp-unit(gap, 16, 20);

				@media (max-width: 768px) {
					gap: 0;
				}
			}

			.ppl-card {
				@include clamp-unit(padding, 24, 40);
				@include clamp-unit(border-radius, 16, 32);
				@include clamp-unit(margin-bottom, 16, 20);

				&:last-child {
					margin-bottom: 0;
				}

				.ppl-card-content {
					display: grid;
					grid-template-columns: 1fr;
					@include clamp-unit(gap, 24, 40);

					@media (min-width: 768px) {
						grid-template-columns: 1fr 433px;
					}

					&.ppl-card-reverse {
						@media (min-width: 768px) {
							grid-template-columns: 433px 1fr;
						}
					}
				}

				.ppl-card-text {
					display: flex;
					flex-direction: column;
					@include clamp-unit(gap, 16, 24);
					order: 1;

					@media (min-width: 768px) {
						order: unset;
					}

					.ppl-card-title {
						@include clamp-unit(font-size, 24, 32);
						line-height: 1.35;
					}

					.ppl-card-description {
						@include clamp-unit(font-size, 16, 16);
						line-height: 1.6;

						p {
							margin-bottom: 0;
						}
					}
				}

				.ppl-card-images {
					display: flex;
					@include clamp-unit(gap, 4, 4);
					// @include clamp-unit(height, 200, 306);
					@include clamp-unit(border-radius, 8, 16);
					overflow: hidden;
					order: 2;

					@media (min-width: 768px) {
						order: unset;
					}

					.ppl-image-wrapper {
						flex: 1;
					}
				}

				.ppl-card-grid-images {
					display: grid;
					grid-template-columns: repeat(2, 1fr);
					grid-template-rows: repeat(2, 1fr);
					@include clamp-unit(gap, 4, 4);
					@include clamp-unit(height, 200, 306);
					@include clamp-unit(border-radius, 12, 16);
					overflow: hidden;
					order: 2;

					@media (min-width: 768px) {
						order: unset;
					}

					.ppl-grid-image {
						position: relative;
					}

					.ppl-play-button {
						@include clamp-unit(top, 24, 44);
						@include clamp-unit(left, 50, 97);
						@include clamp-unit(width, 16, 19);
						@include clamp-unit(height, 16, 19);
					}
				}
			}
		}

		// 공통 불릿 리스트 스타일
		.ppl-card-description,
		.cnx-mall-card-description {
			list-style: none;
			padding-left: 0;

			li {
				position: relative;
				padding-left: 0.75em;
				margin-bottom: 0.5em;

				&::before {
					content: '';
					position: absolute;
					left: 0;
					width: 0.3em;
					height: 0.3em;
					border-radius: 50%;
					background-color: #666;
					font-size: 0.8em;
					top: 0.75em;
				}

				&:last-child {
					margin-bottom: 0;
				}
			}
		}
	}
}
